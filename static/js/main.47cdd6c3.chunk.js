(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{69:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(13),i=n.n(a),o=(n(69),n(42)),s=n(8),l=n(119),j=n(122),b=n(123),d=n(125),u=n(132),h=n(5),x=n(121),p=n(95),m=n(134),O=n(135),f=n(2),g=Object(l.a)((function(e){return{root:{maxWidth:300,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},checkbox_container:{"&:hover":{background:"#F1FCFF",border:0}},paper:{margin:"auto",maxWidth:500},formLabel:{margin:20,marginBottom:5,color:"#4A4A4A",fontStyle:"normal",fontWeight:550,fontSize:"14px",lineHeight:"12px"},formControl:{marginTop:20},labelText:{margin:"0 -20px"}}}));Object(h.a)({root:{margin:0},label:{textTransform:"capitalize"}})(x.a);function v(e){var t=e.filter,n=e.setFilter,c=g(),r=function(){t.all?n({all:!1,without:!1,one:!1,two:!1,three:!1}):n({all:!0,without:!0,one:!0,two:!0,three:!0})};return Object(f.jsx)("div",{className:c.root,children:Object(f.jsx)(p.a,{className:c.paper,children:Object(f.jsxs)(m.a,{component:"fieldset",className:c.formControl,children:[Object(f.jsx)(O.a,{className:c.formLabel,component:"legend",children:"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"}),Object(f.jsxs)(j.a,{role:void 0,dense:!0,button:!0,onClick:function(){return r()},children:[Object(f.jsx)(b.a,{children:Object(f.jsx)(x.a,{control:Object(f.jsx)(u.a,{name:"gilad",color:"primary",onChange:function(){return r()},checked:t.all}),className:c.checkbox_container})}),Object(f.jsx)(d.a,{className:c.labelText,primary:"\u0412\u0441\u0435"})]}),Object(f.jsxs)(j.a,{role:void 0,dense:!0,button:!0,onClick:function(){return n(Object(s.a)(Object(s.a)({},t),{},{without:!t.without}))},children:[Object(f.jsx)(b.a,{children:Object(f.jsx)(x.a,{control:Object(f.jsx)(u.a,{name:"gilad",color:"primary",onChange:function(){return n(Object(s.a)(Object(s.a)({},t),{},{without:!t.without}))},checked:t.without}),className:c.checkbox_container})}),Object(f.jsx)(d.a,{className:c.labelText,primary:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"})]}),Object(f.jsxs)(j.a,{role:void 0,dense:!0,button:!0,onClick:function(){return n(Object(s.a)(Object(s.a)({},t),{},{one:!t.one}))},children:[Object(f.jsx)(b.a,{children:Object(f.jsx)(x.a,{control:Object(f.jsx)(u.a,{name:"gilad",color:"primary",onChange:function(){return n(Object(s.a)(Object(s.a)({},t),{},{one:!t.one}))},checked:t.one}),className:c.checkbox_container})}),Object(f.jsx)(d.a,{className:c.labelText,primary:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"})]}),Object(f.jsxs)(j.a,{role:void 0,dense:!0,button:!0,onClick:function(){return n(Object(s.a)(Object(s.a)({},t),{},{two:!t.two}))},children:[Object(f.jsx)(b.a,{children:Object(f.jsx)(x.a,{control:Object(f.jsx)(u.a,{name:"gilad",color:"primary",onChange:function(){return n(Object(s.a)(Object(s.a)({},t),{},{two:!t.two}))},checked:t.two}),className:c.checkbox_container})}),Object(f.jsx)(d.a,{className:c.labelText,primary:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]}),Object(f.jsxs)(j.a,{role:void 0,dense:!0,button:!0,onClick:function(){return n(Object(s.a)(Object(s.a)({},t),{},{three:!t.three}))},children:[Object(f.jsx)(b.a,{children:Object(f.jsx)(x.a,{control:Object(f.jsx)(u.a,{name:"gilad",color:"primary",onChange:function(){return n(Object(s.a)(Object(s.a)({},t),{},{three:!t.three}))},checked:t.three}),className:c.checkbox_container})}),Object(f.jsx)(d.a,{className:c.labelText,primary:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]})]})})})}var y=n(96),k=n(130),N=n(131),w=n(126),S=n(127),C=n(128),F=n(40),T=n.n(F);function A(e,t){var n="H:mm",c=T()(e),r=T()(c).add(t,"minutes");return c.format(n)+" - "+r.format(n)}function E(e){var t=Math.floor(e/60),n=e-60*t;return Object(f.jsxs)(f.Fragment,{children:[t,"\u0447 ",n,"\u043c"]})}function _(e){switch(e){case 0:return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a";case 1:return"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430";default:return"".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438")}}var I=Object(l.a)({root:{minWidth:275,marginTop:"17px",paddingLeft:"20px",paddingRight:"20px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},imageAndPrice:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},body:{display:"flex",marginTop:"10px"},group:{display:"flex",flexDirection:"column",marginRight:"10px"},cover:{height:40,width:120},label:{fontStyle:"normal",fontWeight:500,fontSize:"14px",lineHeight:"12px",color:"#A0B0B9"},item:{marginTop:"8px",fontStyle:"normal",fontWeight:500,fontSize:"14px",lineHeight:"12px",color:"#4A4A4A"},price:{marginTop:"8px",color:"#2196F3",fontWeight:600,fontStyle:"normal",fontSize:"24px",lineHeight:"24px"}});function z(e){var t=e.data,n=I();return Object(f.jsx)(w.a,{className:n.root,children:Object(f.jsxs)(S.a,{children:[Object(f.jsxs)("div",{className:n.imageAndPrice,children:[Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:n.price,children:[t.price," \u0420"]})}),Object(f.jsx)("div",{children:Object(f.jsx)("img",{className:n.cover,src:"https://pics.avs.io/99/36/".concat(t.carrier,".png")})})]}),t.segments.map((function(e,t){return Object(f.jsxs)(C.a,{container:!0,spacing:3,children:[Object(f.jsxs)(C.a,{item:!0,xs:!0,children:[Object(f.jsxs)("div",{className:n.label,children:[e.origin,"-",e.destination]}),Object(f.jsx)("div",{className:n.item,children:A(e.date,e.duration)})]}),Object(f.jsxs)(C.a,{item:!0,xs:!0,children:[Object(f.jsx)("div",{className:n.label,children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(f.jsx)("div",{className:n.item,children:E(e.duration)})]}),Object(f.jsxs)(C.a,{item:!0,xs:!0,children:[Object(f.jsx)("div",{className:n.label,children:_(e.stops.length)}),Object(f.jsx)("div",{className:n.item,children:e.stops.join(", ")})]})]},t)}))]})})}var H=n(17),W=n.n(H),B=n(37),R=n(41),J=n.n(R),D="SET_AVIA_SALES",L="SET_SEARCH_ID",M="SET_IS_FETCHING",P="SET_FETCH_ERROR",G={tickets:[],searchId:"",isFetching:!0,isFetchError:!1},V=function(e){return{type:D,tickets:e}},q=function(e){return{type:M,payload:e}},K=function(e){return{type:P,payload:e}},Q=n(15),U=n.p+"static/media/logo.dce2d712.svg",X=n(133),Y=n(129),Z=Object(l.a)((function(e){return{root:{display:"flex",flexDirection:"column",background:"#F3F7FA"},main:{display:"flex",flexDirection:"row",justifyContent:"center"},list:{marginTop:"17px",marginBottom:"50px"},group:{width:500,marginLeft:"20px"},img:{padding:"50px 0",textAlign:"center"},button:{color:"#4A4A4A",fontStyle:"normal",fontWeight:550,fontSize:"14px",lineHeight:"12px"},error:{display:"flex",justifyContent:"center"}}})),$=Object(h.a)({root:{background:"white",height:48,padding:"0 30px",width:250,"&:hover":{background:"#2196F3",border:0,color:"#fff"},"&:onClick":{background:"#2196F3",border:0,color:"#fff"}},label:{textTransform:"capitalize"}})(y.a),ee=function(){var e=Object(Q.b)(),t=Object(Q.c)((function(e){return e.avia.searchId})),n=Object(Q.c)((function(e){return e.avia.tickets})),r=Object(Q.c)((function(e){return e.avia.isFetching})),a=Object(Q.c)((function(e){return e.avia.isFetchError})),i=Z(),s=Object(c.useState)([]),l=Object(o.a)(s,2),j=l[0],b=l[1],d=Object(c.useState)({all:!0,without:!1,one:!1,two:!1,three:!1}),u=Object(o.a)(d,2),h=u[0],x=u[1],p=Object(c.useCallback)((function(e){return Object.keys(h).every((function(e){return!1===h[e]}))?e:e.filter((function(e){return h.all||h.without&&0===e.segments[0].stops.length&&0===e.segments[1].stops.length||h.one&&1===e.segments[0].stops.length&&1===e.segments[1].stops.length||h.two&&2===e.segments[0].stops.length&&2===e.segments[1].stops.length||h.three&&3===e.segments[0].stops.length&&3===e.segments[1].stops.length?e:void 0}))}),[h]);Object(c.useEffect)((function(){b(p(n).slice(0,5))}),[n,p]),Object(c.useEffect)((function(){e(function(){var e=Object(B.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.a.get("https://front-test.beta.aviasales.ru/search");case 2:n=e.sent,t((c=n.data,{type:L,payload:c}));case 4:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(c.useEffect)((function(){e(function(e){return function(){var t=Object(B.a)(W.a.mark((function t(n){var c;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&(c=function(){return(c=Object(B.a)(W.a.mark((function t(){var c;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(q(!0)),t.next=4,J.a.get("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e));case 4:c=t.sent,n(V(c.data.tickets)),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),n(K(!0)),n(q(!1)),setTimeout((function(){n(K(!1))}),2e3);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)},function(){c.apply(this,arguments)}());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t)),b(n)}),[t]);return Object(f.jsxs)("div",{children:[a&&Object(f.jsxs)(X.a,{severity:"error",className:i.error,children:[Object(f.jsx)(Y.a,{children:"Server Error!"}),"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! \u2014 ",Object(f.jsx)("strong",{children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443!"})]}),Object(f.jsxs)("div",{className:i.root,children:[Object(f.jsx)("div",{className:i.img,children:Object(f.jsx)("img",{src:U})}),Object(f.jsxs)("div",{className:i.main,children:[Object(f.jsx)("div",{children:Object(f.jsx)(v,{filter:h,setFilter:x})}),Object(f.jsxs)("div",{className:i.group,children:[Object(f.jsx)("div",{children:Object(f.jsxs)(k.a,{variant:"outlined",size:"large","aria-label":"large outlined button group",children:[Object(f.jsx)($,{className:i.button,onClick:function(){var e=JSON.parse(JSON.stringify(j));e.sort((function(e,t){return e.price>t.price?1:-1})),b(e)},children:"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0415\u0412\u042b\u0419"}),Object(f.jsx)($,{className:i.button,onClick:function(){var e=JSON.parse(JSON.stringify(j));e.sort((function(e,t){return t.segments[0].duration+t.segments[1].duration<e.segments[0].duration+e.segments[1].duration?1:-1})),b(e)},children:"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419"})]})}),Object(f.jsx)("div",{className:i.list,children:r?Object(f.jsx)("div",{className:i.error,children:Object(f.jsx)(N.a,{})}):j.map((function(e,t){return Object(f.jsx)(z,{data:e},t)}))})]})]})]})]})},te=n(30),ne=n(57),ce=n(58),re=Object(te.combineReducers)({avia:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(s.a)(Object(s.a)({},e),{},{tickets:t.tickets,isFetching:!1});case L:return Object(s.a)(Object(s.a)({},e),{},{searchId:t.payload.searchId});case M:return Object(s.a)(Object(s.a)({},e),{},{isFetching:t.payload});case P:return Object(s.a)(Object(s.a)({},e),{},{isFetchError:t.payload});default:return e}}}),ae=Object(te.createStore)(re,Object(ne.composeWithDevTools)(Object(te.applyMiddleware)(ce.a)));i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(Q.a,{store:ae,children:Object(f.jsx)(ee,{})})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.47cdd6c3.chunk.js.map